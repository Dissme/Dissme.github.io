(self.webpackChunkeasy_view_boilerplate=self.webpackChunkeasy_view_boilerplate||[]).push([[163],{98:function(n,e,s){"use strict";s.r(e),s.d(e,{group:function(){return r}});var t=s(408);const r="@easythings/easy-view";function a(n){const e=Object.assign({h2:"h2",blockquote:"blockquote",p:"p",strong:"strong",code:"code",br:"br",pre:"pre",span:"span"},n.components);return(0,t.BX)(t.HY,{children:[(0,t.tZ)(e.h2,{children:"mount(node: JSXElement, container: HTMLElement): () => void"}),"\n",(0,t.BX)(e.blockquote,{children:["\n",(0,t.tZ)(e.p,{children:"用于把组件渲染到页面上"}),"\n"]}),"\n",(0,t.BX)(e.p,{children:[(0,t.tZ)(e.strong,{children:"node:"})," 类似 ",(0,t.tZ)(e.code,{children:"<Main />"})," 这样的一个标签",(0,t.tZ)(e.br,{}),"\n",(0,t.tZ)(e.strong,{children:"container:"})," 一个可以挂载的节点",(0,t.tZ)(e.br,{}),"\n",(0,t.tZ)(e.strong,{children:"返回值:"})," 卸载函数"]}),"\n",(0,t.tZ)(e.pre,{children:(0,t.BX)(e.code,{className:"hljs language-jsx",children:[(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," destroy = mount(",(0,t.tZ)(e.span,{className:"xml",children:(0,t.BX)(e.span,{className:"hljs-tag",children:["<",(0,t.tZ)(e.span,{className:"hljs-name",children:"Main"})," />"]})}),", ",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"document"}),".body); ",(0,t.tZ)(e.span,{className:"hljs-comment",children:"// 挂载到body"}),"\ndestroy(); ",(0,t.tZ)(e.span,{className:"hljs-comment",children:"// 卸载"}),"\n"]})})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=n.components||{};return e?(0,t.tZ)(e,Object.assign({},n,{children:(0,t.tZ)(a,n)})):a(n)}},454:function(n,e,s){"use strict";s.r(e),s.d(e,{group:function(){return r}});var t=s(408);const r="@easythings/easy-view";function a(n){const e=Object.assign({h2:"h2",blockquote:"blockquote",p:"p",strong:"strong",br:"br",a:"a",pre:"pre",code:"code",span:"span"},n.components);return(0,t.BX)(t.HY,{children:[(0,t.tZ)(e.h2,{children:"mountFromPort(port: MessagePort, container: HTMLElement): () => void"}),"\n",(0,t.BX)(e.blockquote,{children:["\n",(0,t.tZ)(e.p,{children:"把从 port 收到的消息渲染到页面上"}),"\n"]}),"\n",(0,t.BX)(e.p,{children:[(0,t.tZ)(e.strong,{children:"port:"})," 一个可以收消息的 MessagePort",(0,t.tZ)(e.br,{}),"\n","其他和 ",(0,t.tZ)(e.a,{href:"#mount",children:"mount"})," 一样"]}),"\n",(0,t.tZ)(e.pre,{children:(0,t.BX)(e.code,{className:"hljs language-jsx",children:[(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," port = ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"new"})," Worker(",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"new"})," URL(",(0,t.tZ)(e.span,{className:"hljs-string",children:"'@/components/worker/Menu'"}),", ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"import"}),".meta.url));\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," destroy = mountFromPort(port, ",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"document"}),".querySelector(",(0,t.tZ)(e.span,{className:"hljs-string",children:"'#menu'"}),")); ",(0,t.tZ)(e.span,{className:"hljs-comment",children:"// 挂载"}),"\ndestroy(); ",(0,t.tZ)(e.span,{className:"hljs-comment",children:"// 卸载"}),"\n"]})})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=n.components||{};return e?(0,t.tZ)(e,Object.assign({},n,{children:(0,t.tZ)(a,n)})):a(n)}},368:function(n,e,s){"use strict";s.r(e),s.d(e,{group:function(){return r}});var t=s(408);const r="@easythings/easy-view";function a(n){const e=Object.assign({h2:"h2",blockquote:"blockquote",p:"p",strong:"strong",code:"code",br:"br",pre:"pre",span:"span"},n.components);return(0,t.BX)(t.HY,{children:[(0,t.tZ)(e.h2,{children:"render(node: JSXElement): (port: MessagePort) => number"}),"\n",(0,t.BX)(e.blockquote,{children:["\n",(0,t.tZ)(e.p,{children:"用于把用户的代码渲染成虚拟 dom"}),"\n"]}),"\n",(0,t.BX)(e.p,{children:[(0,t.tZ)(e.strong,{children:"node:"})," 类似 ",(0,t.tZ)(e.code,{children:"<Main />"})," 这样的一个标签",(0,t.tZ)(e.br,{}),"\n",(0,t.tZ)(e.strong,{children:"返回值:"})," 用来监听 port 发来的事件、发送虚拟 dom 的函数"]}),"\n",(0,t.tZ)(e.pre,{children:(0,t.BX)(e.code,{className:"hljs language-jsx",children:[(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," listen = render(",(0,t.tZ)(e.span,{className:"xml",children:(0,t.BX)(e.span,{className:"hljs-tag",children:["<",(0,t.tZ)(e.span,{className:"hljs-name",children:"Menu"})," />"]})}),");\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," platform = self.constructor.name;\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," init = {\n  [",(0,t.tZ)(e.span,{className:"hljs-string",children:"'SharedWorkerGlobalScope'"}),"]() {\n    self.onconnect = ",(0,t.BX)(e.span,{className:"hljs-function",children:["(",(0,t.tZ)(e.span,{className:"hljs-params",children:"{ ports }"}),") =>"]})," {\n      ports.forEach(",(0,t.BX)(e.span,{className:"hljs-function",children:["(",(0,t.tZ)(e.span,{className:"hljs-params",children:"port"}),") =>"]})," {\n        listen(port);\n      });\n    };\n  },\n  [",(0,t.tZ)(e.span,{className:"hljs-string",children:"'DedicatedWorkerGlobalScope'"}),"]() {\n    listen(self);\n  },\n};\ninit[platform]?.();\n"]})})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=n.components||{};return e?(0,t.tZ)(e,Object.assign({},n,{children:(0,t.tZ)(a,n)})):a(n)}},677:function(n,e,s){"use strict";s.r(e),s.d(e,{group:function(){return r}});var t=s(408);const r="@easythings/easy-view";function a(n){const e=Object.assign({h2:"h2",blockquote:"blockquote",p:"p",strong:"strong",br:"br",pre:"pre",code:"code",span:"span"},n.components);return(0,t.BX)(t.HY,{children:[(0,t.tZ)(e.h2,{children:"use(plugins: Record<string, { call?(this: HTMLElement, target: HTMLElement, dispatch: (detail: object) => {}): () => void; format?(): object }>): void"}),"\n",(0,t.BX)(e.blockquote,{children:["\n",(0,t.tZ)(e.p,{children:"用于创建用户的自定义事件 页面里才能用"}),"\n"]}),"\n",(0,t.BX)(e.p,{children:[(0,t.tZ)(e.strong,{children:"plugins:"})," 一个配置用户的自定义事件的对象",(0,t.tZ)(e.br,{}),"\n",(0,t.tZ)(e.strong,{children:"call:"})," jsx 里绑定对应事件的时候 dom 环境会调用 call 函数",(0,t.tZ)(e.br,{}),"\n",(0,t.tZ)(e.strong,{children:"dispatch:"})," 用于触发事件 传递的 detail 参数会出现在事件的 detail 里 detail 对象里不能放不能通过 port 传递的东西"]}),"\n",(0,t.tZ)(e.pre,{children:(0,t.BX)(e.code,{className:"hljs language-jsx",children:[(0,t.tZ)(e.span,{className:"hljs-comment",children:"// bootstrap.js"}),"\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"import"})," { customEvents } ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"from"})," ",(0,t.tZ)(e.span,{className:"hljs-string",children:"'./utils'"}),";\nuse(customEvents);\n",(0,t.tZ)(e.span,{className:"hljs-comment",children:"// utils.js"}),"\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"import"})," intersection ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"from"})," ",(0,t.tZ)(e.span,{className:"hljs-string",children:"'./intersection'"}),";\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"export"})," ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," customEvents = {\n  intersection,\n  ",(0,t.tZ)(e.span,{className:"hljs-attr",children:"input"}),": {\n    ",(0,t.BX)(e.span,{className:"hljs-function",children:[(0,t.tZ)(e.span,{className:"hljs-title",children:"format"}),"(",(0,t.tZ)(e.span,{className:"hljs-params",children:"e"}),")"]})," {\n      ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," target = e.target;\n      ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"let"})," value = target.value;\n      ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"if"})," (target.isContentEditable) {\n        value = target.innerHTML;\n      }\n      ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"return"})," { value };\n    },\n  },\n};\n",(0,t.tZ)(e.span,{className:"hljs-comment",children:"// intersection.js"}),"\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," observerMap = ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"WeakMap"}),"();\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"const"})," dispatchMap = ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"WeakMap"}),"();\n\n",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"export"})," ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"default"})," ",(0,t.BX)(e.span,{className:"hljs-function",children:[(0,t.tZ)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,t.tZ)(e.span,{className:"hljs-title",children:"intersection"}),"(",(0,t.tZ)(e.span,{className:"hljs-params",children:"target, dispatch"}),") "]}),"{\n  dispatchMap.set(target, dispatch);\n  ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"if"})," (!observerMap.has(",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"this"}),")) {\n    observerMap.set(\n      ",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"this"}),",\n      ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"new"})," IntersectionObserver(\n        ",(0,t.BX)(e.span,{className:"hljs-function",children:["(",(0,t.tZ)(e.span,{className:"hljs-params",children:"entries"}),") =>"]})," {\n          entries.forEach(",(0,t.BX)(e.span,{className:"hljs-function",children:["(",(0,t.tZ)(e.span,{className:"hljs-params",children:"item"}),") =>"]})," {\n            dispatchMap.get(item.target)(item.intersectionRatio);\n          });\n        },\n        {\n          ",(0,t.tZ)(e.span,{className:"hljs-attr",children:"threshold"}),": [",(0,t.tZ)(e.span,{className:"hljs-number",children:"0"}),", ",(0,t.tZ)(e.span,{className:"hljs-number",children:"0.5"}),", ",(0,t.tZ)(e.span,{className:"hljs-number",children:"1"}),"],\n        },\n      ),\n    );\n  }\n\n  observerMap.get(",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"this"}),").observe(target);\n\n  ",(0,t.tZ)(e.span,{className:"hljs-keyword",children:"return"})," ",(0,t.tZ)(e.span,{className:"hljs-function",children:"() =>"})," {\n    observerMap.get(",(0,t.tZ)(e.span,{className:"hljs-built_in",children:"this"}),").unobserve(target);\n    dispatchMap.delete(target);\n  };\n}\n"]})})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=n.components||{};return e?(0,t.tZ)(e,Object.assign({},n,{children:(0,t.tZ)(a,n)})):a(n)}},307:function(n,e,s){"use strict";s.r(e);var t=s(408);function r(n){const e=Object.assign({h2:"h2"},n.components);return(0,t.tZ)(e.h2,{children:"可以直接问作者或者看源码 今天写不动了 慢慢更新文档"})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=n.components||{};return e?(0,t.tZ)(e,Object.assign({},n,{children:(0,t.tZ)(r,n)})):r(n)}},662:function(n,e,s){"use strict";var t=s(408),r=s(521),a=s(607);const c=s(68),l=c.keys().map((n=>{var e;return{id:n.match(/\.\/(.*)\.mdx$/)[1],Component:c(n).default,group:null!==(e=c(n).group)&&void 0!==e?e:"建设中"}})).sort(((n,e)=>n.group.charCodeAt()-e.group.charCodeAt()));(0,r.LI)((0,t.tZ)((function(){return(0,t.Au)((()=>(0,t.tZ)(a.A,{children:l.map((n=>(0,t.tZ)(n.Component,{group:n.group,components:a.w},n.id)))})))}),{}),document.querySelector("#app"))},68:function(n,e,s){var t={"./mount.mdx":98,"./mountFromPort.mdx":454,"./render.mdx":368,"./use.mdx":677,"./其他.mdx":307};function r(n){var e=a(n);return s(e)}function a(n){if(!s.o(t,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return t[n]}r.keys=function(){return Object.keys(t)},r.resolve=a,n.exports=r,r.id=68}},function(n){n.O(0,[592,672],(function(){return e=662,n(n.s=e);var e}));n.O()}]);