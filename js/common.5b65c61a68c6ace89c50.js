"use strict";(self.webpackChunkeasy_view_boilerplate=self.webpackChunkeasy_view_boilerplate||[]).push([[592],{607:function(e,t,s){s.d(t,{A:function(){return o},w:function(){return i}});var n=s(408);const i={h2:(e,t)=>(0,n.Au)((()=>(0,n.tZ)("h2",{className:"font-bold text-xl",id:"string"===t[0]&&t[0],children:t}))),blockquote:(e,t)=>(0,n.Au)((()=>(0,n.tZ)("blockquote",{className:"group text-justify leading-relaxed text-slate-400 text-sm mb-6",children:t.reduce(((e,t)=>(t.tag===i.p&&e.push(t.children),e)),[])}))),p:(e,t)=>(0,n.Au)((()=>(0,n.tZ)("p",{className:"text-justify leading-relaxed mb-2 text-sm",children:t}))),code:(e,t)=>(0,n.Au)((()=>{var s;return(0,n.tZ)("code",{className:`text-slate-400 ${null!==(s=e.className)&&void 0!==s?s:""}`,children:t})})),pre:(e,t)=>(0,n.Au)((()=>(0,n.BX)("details",{className:"text-sm",open:!0,children:[(0,n.tZ)("summary",{className:"cursor-pointer select-none py-2 pr-2 w-fit",children:"示例"}),r(t[0])]}))),strong:(e,t)=>(0,n.Au)((()=>(0,n.tZ)("strong",{className:"text-base mr-2",children:t}))),a:(e,t)=>(0,n.Au)((()=>(0,n.tZ)("a",{href:e.href,className:"text-sky-500 decoration-current decoration-wavy underline",children:t})))};function r(e){if(e)return(0,n.Au)((()=>{var t,s,i,r;return(0,n.tZ)("code",{className:`${null!==(t=null===(s=e.props)||void 0===s?void 0:s.className)&&void 0!==t?t:""} block rounded overflow-auto leading-loose whitespace-nowrap`,children:null===(i=e.children)||void 0===i||null===(r=i.map)||void 0===r?void 0:r.call(i,(e=>{if("string"==typeof e){const t=(e=e.replace(/ /g," ")).split("\n");t.length&&(e=t.map(((e,t)=>[t&&(0,n.tZ)("br",{}),e])))}return e}))})}))}function o(e,t){const s=()=>t.filter((e=>e.key)).reduce(((e,t)=>{const s=t.props.group;if(!e[s]){const t=[];t.name=s,e[s]=t,e.push(t)}return e[s].push(t),e}),[]);let i=decodeURIComponent(location.hash.slice(1));const r={},o=()=>{let e=i,t=0,s=null;return Object.keys(r).find((e=>{if(r[e]>t&&(t=r[e],s=e),t>=1)return!0})),t>(r[i]||0)&&(e=s),e};return(0,n.Au)((()=>(0,n.BX)(n.HY,{children:[(0,n.tZ)("aside",{className:"h-full fixed left-0 w-64 overflow-x-hidden overflow-y-auto text-sm break-words",children:s().map((e=>(0,n.tZ)("nav",{children:(0,n.BX)("ol",{className:"py-4 pl-4",children:[(0,n.tZ)("li",{className:"py-2",children:(0,n.tZ)("span",{className:"text-base",children:e.name})}),e.map((e=>(0,n.tZ)("li",{className:"py-1",children:(0,n.tZ)("a",{href:`#${e.key}`,"on-click":()=>{i=e.key},className:"border-l pl-4 "+(e.key===o()?"text-sky-500 border-sky-500":"border-slate-50/30 hover:text-sky-500"),children:e.key})},`#${e.key}`)))]})},e.name)))}),(0,n.tZ)("main",{className:"pl-72 pt-6 pb-6 pr-6 lg:pr-60 break-words",children:s().map((e=>(0,n.BX)("section",{className:"pb-4 mb-14",children:[(0,n.tZ)("h1",{className:"font-bold text-3xl",children:e.name}),e.map((e=>(0,n.BX)("section",{className:"p-4 rounded-lg bg-stone-50/30 my-4 relative","on-intersection":t=>{let{detail:{value:s}}=t;r[e.key]=s},children:[(0,n.tZ)("span",{id:e.key,className:"absolute -top-16","on-mounted":()=>{var t,s;e.key===i&&(null===(t=document.querySelector(`#${i}`))||void 0===t||null===(s=t.scrollIntoView)||void 0===s||s.call(t,{block:"center",inline:"center",behavior:"smooth"}))}}),e]},e.key)))]},e.name)))})]})))}},408:function(e,t,s){s.d(t,{Au:function(){return _},BX:function(){return V},HY:function(){return N},tZ:function(){return z}});var n=Object.defineProperty,i=(e,t,s)=>(((e,t,s)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s),r=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},o=(e,t,s)=>(r(e,t,"read from private field"),s?s.call(e):t.get(e)),l=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},a=(e,t,s,n)=>(r(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),h=(e,t,s)=>(r(e,t,"access private method"),s);const c=1,d=2,u=5,p=7,f=1,v=2,y=3,m=4,g=5;var k,b,w,x;class E{constructor(){l(this,k),l(this,w),i(this,"target",new EventTarget),i(this,"pool",{}),i(this,"oncePool",{}),i(this,"listeners",[])}on(e,t){"function"==typeof t&&(this.pool[e]||(this.pool[e]=new Set)).add(t)}off(e,t){var s,n,i,r,o,l;void 0===t?null==(n=null==(s=this.pool[e])?void 0:s.clear)||n.call(s):(null==(r=null==(i=this.pool[e])?void 0:i.delete)||r.call(i,t),null==(l=null==(o=this.oncePool[e])?void 0:o.delete)||l.call(o,t))}once(e,t){"function"==typeof t&&(this.oncePool[e]||(this.oncePool[e]=new Set)).add(t)}dispatch(e,t=null){var s,n,i,r;const o=new CustomEvent(e,{detail:t,cancelable:!0,bubbles:!0}),l=self.onerror;let a;const c=new WeakMap,d=[];return self.onerror=(e,t,s,n,i)=>{d.push(i),c.set(a,i)},this.listeners=[...null!=(s=this.oncePool["*"])?s:[],...null!=(n=this.oncePool[e])?n:[],...null!=(i=this.pool["*"])?i:[],...null!=(r=this.pool[e])?r:[]].map((e=>t=>{a=e;const s=e(t);d.push(s),c.set(a,s)})),this.oncePool["*"]=new Set,this.oncePool[e]=new Set,h(this,k,b).call(this,e),this.target.dispatchEvent(o),o.result=e=>c.get(e),o.results=d,self.onerror=l,h(this,w,x).call(this,e),o}}k=new WeakSet,b=function(e){this.listeners.forEach((t=>{this.target.addEventListener(e,t)}))},w=new WeakSet,x=function(e){this.listeners.forEach((t=>{this.target.removeEventListener(e,t)})),this.listeners=[]};const H=new class{constructor(){i(this,"firstPaint",!0),i(this,"currentPhase",new Map),i(this,"nextPase",new Map),i(this,"timer"),i(this,"running",!1),i(this,"circleTimes",new WeakMap),i(this,"loop",(()=>{this.nextPase.size&&(this.currentPhase=this.nextPase,this.nextPase=new Map),this.running=!0;let e,t=[];if(this.currentPhase.forEach(((s,n)=>{var i,r,o;const l=null!=(i=this.circleTimes.get(n))?i:0;l>50&&(e=new Error(`<${null!=(r=n.tag.name)?r:n.tag} key=${null!=(o=n.key)?o:""}> 该组件循环更新多次!!!`)),this.circleTimes.set(n,l+1);const a=n.id.split(",").length;(t[a]||(t[a]=[])).push((()=>{this.currentPhase.delete(n),n.diff(this.currentPhase.get(n))}))})),t.forEach((e=>e.forEach((e=>e())))),t=[],e)throw e;if(this.nextPase.size)return this.firstPaint?this.loop():setTimeout(this.loop,0);this.firstPaint=!1,this.circleTimes=new WeakMap,this.running=!1,this.timer=null}))}add(e,t){this.running&&!this.currentPhase.has(e)?this.nextPase.set(e,this.nextPase.get(e)||t):this.currentPhase.set(e,this.currentPhase.get(e)||t),!this.timer&&(this.timer=Promise.resolve().then(this.loop))}delete(e){const t=new RegExp(`^${e.id}`);this.currentPhase.forEach(((e,s)=>{t.test(s.id)&&this.currentPhase.delete(s)})),this.nextPase.forEach(((e,s)=>{t.test(s.id)&&this.nextPase.delete(s)}))}};function $(e=[],t){const s=[],n=[];return t.forEach(((i,r)=>{const o=e.findIndex((e=>function(e,t){if(!C(e,t))return!1;const i={id:t.id,curNode:t,diffrent:!1};if(e.id!==t.id&&(n.push({from:t.index,to:e.index}),t._text&&(t.id=e.id),t.index=e.index),Z(e.props,t.props)||(i.diffrent=!0,Object.keys({...t.props,...e.props}).forEach((s=>{t.props[s]=e.props[s]})),i.props=t.props),!Z(e.eventHandlers,t.eventHandlers)){let s=!1;t.offBindEventHandlers(),Object.keys({...t.eventHandlers,...e.eventHandlers}).forEach((n=>{(!t.eventHandlers[n]||!e.eventHandlers[n])&&(s=!0),t.eventHandlers[n]=e.eventHandlers[n]})),i.diffrent=i.diffrent||s,i.eventHandlers=t.eventHandlers,t.bindEventHandlers()}return A(e.children,t.children)||(i.diffrent=!0,t.children.splice(0,t.children.length,...e.children)),s.push(i),!0}(i,e)));o>=0&&(e[o]=null,t[r]=null)})),{updateds:s,moves:n}}const P=Symbol("IS_RENDER");function _(e){return e[P]=!0,e}function N(e,t=[]){return t}class M{constructor(e){i(this,"parent"),i(this,"destroyed",!1),i(this,"$scope",new Set),i(this,"index",0),i(this,"hook",new E),i(this,"updateHandler"),i(this,"channel"),i(this,"patchs",[]),i(this,"tag",N),i(this,"key"),i(this,"children",[]),i(this,"props",{}),i(this,"eventHandlers",{}),i(this,"results",[]),i(this,"update",(e=>{H.add(this,e)})),i(this,"destroy",(()=>{H.delete(this),this.destroyed=!0,this.parent=null,this.$scope.clear(),this.channel=null,this.offBindEventHandlers(),this.results.forEach((e=>{var t;return null==(t=e.emit)?void 0:t.call(e,{type:"destroy"})}))})),i(this,"userHook",new Proxy({},{get:(e,t)=>{t=t.replace(/_capture$/,"");const s=e=>{this.emit({type:t,detail:e})},n=e=>this.hook.on(`${t}_capture`,e);return Object.assign(n,{once:e=>{this.hook.once(`${t}_capture`,e)},off:e=>{this.hook.off(`${t}_capture`,e)}}),Object.assign(s,{on:e=>{this.hook.on(t,e)},once:e=>{this.hook.once(t,e)},off:e=>{this.hook.off(t,e)},before:n}),s}})),i(this,"post",function(e){let t=null;return function(...s){return t||(t=Promise.resolve().then((()=>{e.apply(this,s),t=null}))),t}}((()=>{this.channel&&this.patchs.length&&this.channel.postMessage(d,this.patchs),this.patchs=[]}))),Object.assign(this,e),this.hook.on("update",this.update),this.hook.on("destroy",this.destroy),this.bindEventHandlers()}static filterProps(e){if(!e)return;const t=["boolean","string","number"];return Object.keys(e).reduce(((s,n)=>t.includes(typeof e[n])?{...s,[n]:e[n]}:s),{})}static filterEventHandlers(e){if(e)return[...new Set(Object.keys(e).map((e=>e.replace(/_capture$/,""))))]}static node2obj(e){return e=e instanceof M?{id:e.id,tag:"function"==typeof e.tag?e.tag.name:e.tag,props:this.filterProps(e.props),eventHandlers:this.filterEventHandlers(e.eventHandlers),_fragment:"function"==typeof e.tag}:{id:e.id,text:e.text,_text:!0}}get id(){var e,t;return`${null!=(t=null==(e=this.parent)?void 0:e.id)?t:""},${this.index}`}callInital(e){var t;if(!this.channel)return;const s=[],n=[this];for(;n.length;){const e=n.shift();n.push(...null!=(t=e.results)?t:[]),s.push(M.node2obj(e))}this.post().finally((()=>{this.channel.postMessage(d,[{id:this.id,type:g,payload:s}],e)}))}emit(e){var t,s;const n=!(null!=(t=e.detail)&&t._eid),i=new RegExp(`^${this.id}`).test(null==(s=e.detail)?void 0:s._eid);if(!n&&!i)return;const r=e.type.replace(/_capture$/,""),o=`${r}_capture`;return e.cancelBubble||(e=this.hook.dispatch(o,e.detail)),n||this.results.forEach((t=>{var s,n;e=null!=(n=null==(s=t.emit)?void 0:s.call(t,e))?n:e})),!(e=e.cancelBubble?e:this.hook.dispatch(r,e.detail)).defaultPrevented&&!["update","destroy"].includes(r)&&e.results.length&&(e.results.forEach((e=>{var t;null==(t=null==e?void 0:e.then)||t.call(e,(()=>{this.$scope.forEach((e=>{e.destroyed?this.$scope.delete(e):e.emit({type:"update"})}))}))})),this.$scope.forEach((e=>{e.destroyed?this.$scope.delete(e):e.emit({type:"update"})}))),e}setResults(e){this.results=O([e]).map(((e,t)=>{var s,n,i;if(e instanceof M){e.parent=this,e.index=t,e.$scope.add(this);const r=[...e.children];for(;r.length;){const e=r.pop();null!=(s=e.children)&&s.length&&r.push(...e.children),null==(i=null==(n=null==e?void 0:e.$scope)?void 0:n.add)||i.call(n,this)}}else e={id:`${this.id},${t}`,index:t,text:e+"",_text:!0};return e}))}callOut(e,t,s){const n=this.patchs[this.patchs.length-1];(null==n?void 0:n.id)===e&&n.type<y&&t===v?Object.assign(n.payload,s):this.patchs.push({id:e,type:t,payload:s}),this.post()}bindEventHandlers(){Object.keys(this.eventHandlers).forEach((e=>{this.hook.on(e,this.eventHandlers[e])}))}offBindEventHandlers(){Object.keys(this.eventHandlers).forEach((e=>{this.hook.off(e,this.eventHandlers[e])}))}diff(e){if(this.destroyed)return;const t=[...this.results];let s=this.children;if("function"==typeof this.tag&&(s=this.fetch()),this.results===s)return;this.setResults(s);const n=[...this.results],{updateds:i,moves:r}=$(t,n);i.forEach((t=>{var s,n;t.diffrent&&this.callOut(t.id,v,{props:M.filterProps(t.props),eventHandlers:M.filterEventHandlers(t.eventHandlers)}),this.results[t.curNode.index]=t.curNode,(t.diffrent||e)&&(null==(n=(s=t.curNode).emit)||n.call(s,{type:"update"}))})),t.forEach((e=>{var t;e&&(this.callOut(e.id,y),null==(t=e.emit)||t.call(e,{type:"destroy"}))})),r.forEach((({from:e,to:t})=>{this.callOut(`${this.id},${e}`,m,{id:`${this.id},${t}`})})),n.forEach((e=>{e&&(this.callOut(e.id,f,M.node2obj(e)),e instanceof M&&(e.channel=this.channel,e.emit({type:"update"})))}))}fetch(){var e,t;const s=null!=(e=this.updateHandler)?e:this.tag.bind(null,this.props,this.children,this.userHook);this.hook.once("__fetch__",s);let n=this.hook.dispatch("__fetch__").result(s);return n instanceof Error&&(n=null!=(t=this.results)?t:[]),"function"==typeof n&&n[P]&&(this.updateHandler=n,n=n()),n}}function j(e){return e.map((e=>"function"==typeof e&&e[P]?j([e()]):Array.isArray(e)?j(e):e instanceof M?new e.constructor({tag:e.tag,props:{...e.props},children:[...e.children],$scope:new Set(e.$scope.values()),key:e.key,eventHandlers:{...e.eventHandlers}}):e))}function O(e){return j(e).flat(1/0).filter((e=>!!e))}function Z(e,t){if(e===t)return!0;if(typeof e!=typeof t||"object"!=typeof e||!e||!t)return!1;const s=Object.keys({...e,...t});for(let n=0;n<s.length;n++){const i=s[n];if(!Z(e[i],t[i]))return!1}return!0}function C(e,t){return e===t||!(!e||!t)&&(e+""==t+""&&e.tag+""==t.tag+""&&e.key===t.key&&e.text===t.text)}function A(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;let s=e.length;for(;s--;){const n=e[s],i=t[s];if(!(C(n,i)&&Z(n.props,i.props)&&Z(n.eventHandlers,i.eventHandlers)&&A(n.children,i.children)))return!1}return!0}class B{constructor(e){i(this,"port"),this.port=e}static getInstance(e){if(this.map.has(e))return this.map.get(e);const t=new this(e);return this.map.set(e,t),t}}i(B,"map",new WeakMap);class S extends B{constructor(e){super(e),i(this,"lastTime",performance.now()),i(this,"count",0),this.postMessage({type:c})}get version(){return`${this.lastTime}-${this.count}`}postMessage(e){e.prev=this.version,e.current=this.updateVersion(),this.port.postMessage(e)}updateVersion(){const e=performance.now();return e!==this.lastTime?(this.lastTime=e,this.count=0):this.count++,this.version}}i(S,"map",new WeakMap);class T extends B{constructor(e){var t;super(e),i(this,"version",""),i(this,"buffer",{}),i(this,"hook",new E),i(this,"onMessage",(({data:e})=>{const{type:t,current:s,prev:n}=e;if(t===c){if(this.version)return;this.version=s,this.hook.dispatch(t)}else this.buffer[n]=e;this.readBuffer()})),e.addEventListener("message",this.onMessage),null==(t=e.start)||t.call(e)}readBuffer(){if(!this.version)return;const e=Object.keys(this.buffer).sort(((e,t)=>{const[s,n]=e.split("-"),[i,r]=t.split("-");return s-i||n-r})),[t,s]=this.version.split("-");for(;e.length;){const n=e.pop(),[i,r]=n.split("-");if(+i<+t||i===t&&+r<+s){Reflect.deleteProperty(this.buffer,n);continue}if(this.version!==n)return;const{type:o,current:l,...a}=this.buffer[n];this.version=l,Reflect.deleteProperty(this.buffer,n),this.hook.dispatch(o,a)}}register(e,t){e===c?this.version?this.hook.once(e,t):t():this.hook.on(e,t)}unregister(e,t){this.hook.off(e,t)}}var W,R,I;i(T,"map",new WeakMap);class X{constructor(){l(this,W,void 0),l(this,R,void 0),l(this,I,{}),i(this,"destroyed",!0)}connect(e){this.destroyed||this.destroy(),a(this,R,T.getInstance(e)),a(this,W,S.getInstance(e)),this.destroyed=!1}register(e,t){o(this,I)[e]=e=>t(null==e?void 0:e.detail),o(this,R).register(e,o(this,I)[e])}postMessage(e,t){const s=o(this,W).version;return o(this,W).postMessage({type:e,body:t}),s}destroy(){this.destroyed||(this.postMessage(p),Object.keys(o(this,I),(e=>{o(this,R).unregister(e,o(this,I)[e])})),a(this,I,{}),a(this,W,null),a(this,R,null))}}W=new WeakMap,R=new WeakMap,I=new WeakMap;class q extends M{constructor(){super(...arguments),i(this,"microChannel"),i(this,"lastPort"),i(this,"inited",!1),i(this,"patchHandler",(({body:e})=>{e[0].type===g&&(this.inited=!0),this.inited&&this.channel.postMessage(d,e.map((({id:e,type:t,payload:s})=>{const n={id:`${this.id}${e}`,type:t,payload:s};return t===g&&(n.payload=s.map((e=>({...e,id:`${this.id}${e.id}`})))),t===m&&(n.payload={...s,id:`${this.id}${s.id}`}),n})))}))}diff(){var e,t;this.lastPort!==this.props.port&&(this.lastPort=this.props.port,null==(t=null==(e=this.microChannel)?void 0:e.destroy)||t.call(e),this.inited=!1,this.microChannel=new X,this.microChannel.connect(this.props.port),this.microChannel.register(d,this.patchHandler),this.microChannel.register(p,(()=>this.destroy())))}emit(e){var t;const s=new RegExp(`^${this.id}`),n=s.test(null==(t=e.detail)?void 0:t._eid),i=e.type.replace(/_capture$/,"");return n&&this.microChannel.postMessage(u,{type:i,detail:{...e.detail,_eid:e.detail._eid.replace(s,"")}}),super.emit(e)}destroy(){var e,t;super.destroy(),null==(t=null==(e=this.microChannel)?void 0:e.destroy)||t.call(e),this.microChannel=null,this.lastPort=null}}function L(){}function V(e,t,s){if("function"!=typeof e&&"string"!=typeof e)throw new TypeError(`意外的tag类型<${e}>`);const n=e===L?q:M;let{children:i,eventHandlers:r,props:o}=function(e){const t={children:[],eventHandlers:{},props:{}};return Object.keys(e).forEach((s=>{"children"===s?t.children=e[s]:/^on-/.test(s)?t.eventHandlers[s.replace(/^on-/,"")]=e[s]:/^before-/.test(s)?t.eventHandlers[s.replace(/^before-/,"")+"_capture"]=e[s]:t.props[s]=e[s]})),t}(t);return i=O(i),new n({tag:e,props:o,children:i,eventHandlers:r,key:s})}function z(e,t,s){return t.children=[t.children],V(e,t,s)}}}]);